<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Agente Financeiro Inteligente</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://s3.tradingview.com/tv.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
    .token-card { background: #222; border: 1px solid #444; border-radius: 8px; padding: 15px; margin: 15px 0; }
    .trend-up { color: #0f0; }
    .trend-down { color: #f33; }
    .info-icon { cursor: pointer; color: #0af; margin-left: 5px; }
    input, button { padding: 8px; margin: 5px 0; border-radius: 5px; border: none; }
    button { background: #0af; color: #fff; cursor: pointer; }
    #chart-container { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Agente Financeiro Inteligente</h1>
  <input type="text" id="searchInput" placeholder="Buscar ativo (ex: bitcoin, ethereum)" />
  <button onclick="buscarAtivo()">üîç Buscar</button>
  <div id="dashboard"></div>
  <div id="chart-container"></div>

  <script>
    async function getPrice(token) {
      const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${token}&vs_currencies=usd`);
      const data = await res.json();
      return data[token]?.usd || 'N/A';
    }

    async function renderToken(token) {
      const price = await getPrice(token);
      const card = document.createElement('div');
      card.className = 'token-card';
      card.innerHTML = `
        <h2>${token.toUpperCase()}</h2>
        <p>Pre√ßo atual: <strong>$${price}</strong></p>
        <p>Tend√™ncia: <span class="trend-up">Alta</span></p>
        <p>RSI: 72 <span class="info-icon" onclick="mostrarExplicacao('RSI')">‚ÑπÔ∏è</span></p>
        <p>MACD: Cruzamento positivo <span class="info-icon" onclick="mostrarExplicacao('MACD')">‚ÑπÔ∏è</span></p>
        <p>Volume: +35% <span class="info-icon" onclick="mostrarExplicacao('Volume')">‚ÑπÔ∏è</span></p>
        <button onclick="abrirGrafico('${token}')">üìà Ver Gr√°fico</button>
        <button onclick="configurarAlerta('${token}')">üîî Criar Alerta</button>
      `;
      document.getElementById('dashboard').appendChild(card);
    }

    function abrirGrafico(token) {
      document.getElementById('chart-container').innerHTML = "";
      const chartDiv = document.createElement('div');
      chartDiv.id = "tv-chart";
      chartDiv.style = "height: 600px;";
      document.getElementById('chart-container').appendChild(chartDiv);

      new TradingView.widget({
        "container_id": "tv-chart",
        "width": "100%",
        "height": "600",
        "symbol": `BINANCE:${token.toUpperCase()}USDT`,
        "interval": "60",
        "timezone": "Etc/UTC",
        "theme": "dark",
        "style": "1",
        "locale": "br",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "hide_side_toolbar": false,
        "allow_symbol_change": true
      });
    }

    function mostrarExplicacao(indicador) {
      const explicacoes = {
        RSI: "RSI (√çndice de For√ßa Relativa) mede a velocidade e mudan√ßa dos movimentos de pre√ßo. Acima de 70 indica sobrecompra, abaixo de 30 indica sobrevenda.",
        MACD: "MACD (Converg√™ncia/Diverg√™ncia de M√©dias M√≥veis) mostra mudan√ßas na for√ßa, dire√ß√£o e dura√ß√£o de uma tend√™ncia.",
        Volume: "Volume anormal pode indicar entrada ou sa√≠da de grandes players (Smart Money)."
      };
      alert(explicacoes[indicador]);
    }

    function buscarAtivo() {
      const token = document.getElementById('searchInput').value.toLowerCase();
      if (token) {
        renderToken(token);
      }
    }

    function configurarAlerta(token) {
      alert(`Em breve: alertas por Telegram/WhatsApp/Discord para ${token.toUpperCase()}`);
    }

    // Ativos padr√£o
    ['bitcoin', 'ethereum', 'solana', 'aave', 'near', 'sui'].forEach(renderToken);
  </script>
</body>
</html>
